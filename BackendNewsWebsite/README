CREATE TABLE Person (
    id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name varchar(100) NOT NULL,
    lastname varchar(100) NOT NULL,
    created_at timestamp,
    email varchar(100) NOT NULL UNIQUE,
    password varchar(100) NOT NULL
);
INSERT INTO Person(name, lastname, created_at, email, password)
VALUES ('Tom', 'Petrov', NOW(), 'tom@gmail.com', '1234');
INSERT INTO Person(name, lastname, created_at, email, password)
VALUES ('Bob', 'Ivanov', NOW(), 'bob@gmail.com', '0456');
INSERT INTO Person(name, lastname, created_at, email, password)
VALUES ('Katy', 'Smirnova', NOW(), 'katy@gmail.com', '77711');
INSERT INTO Person(name, lastname, created_at, email, password)
VALUES ('Test', 'Test', NOW(), 'test@gmail.com', 'Test');
INSERT INTO Person(name, lastname, created_at, email, password)
VALUES ('Anna', 'Ahmatova', NOW(), 'anna@gmail.com', '0192');
INSERT INTO Person(name, lastname, created_at, email, password)
VALUES ('Daria', 'Potomova', NOW(), 'daria@gmail.com', '82846');
INSERT INTO Person(name, lastname, created_at, email, password)
VALUES ('Daniel', 'Howell', NOW(), 'dan@gmail.com', 'qwerty');

CREATE TABLE Post (
    id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ON DELETE CASCADE,
    title varchar(100) NOT NULL,
    text varchar(100) NOT NULL UNIQUE,
    created_at timestamp
);

INSERT INTO Post(title, text, created_at)
VALUES ('News 1', 'Cats are very cute.', NOW());
INSERT INTO Post(title, text, created_at)
VALUES ('News 2', 'Dogs are very cute too.', NOW());

CREATE TABLE Likes(
    person_id int REFERENCES person(id),
    post_id int REFERENCES post(id)
                  );

CREATE TABLE Comments(
    id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ON DELETE CASCADE,
    text varchar(1000),
    person_id int REFERENCES person(id),
    post_id int REFERENCES post(id),
    created_at timestamp
                  );

CREATE TABLE Tags (
     id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
     text varchar(100) NOT NULL UNIQUE
);

INSERT INTO Tags(text)
VALUES ('cats');
INSERT INTO Tags(text)
VALUES ('dogs');

CREATE TABLE Themes(
      tag_id int REFERENCES Tags(id) ON DELETE CASCADE,
      post_id int REFERENCES post(id) ON DELETE CASCADE
);

CREATE TABLE Favor_Tags(
                       tag_id int REFERENCES Tags(id) ON DELETE CASCADE,
                       person_id int REFERENCES person(id) ON DELETE CASCADE
);

CREATE TABLE Banned(
                       tag_id int REFERENCES Tags(id) ON DELETE CASCADE,
                       person_id int REFERENCES person(id) ON DELETE CASCADE
);

ALTER TABLE person
ADD role VARCHAR(15) DEFAULT 'ROLE_USER'

UPDATE person
    SET role = 'ROLE_ADMIN' where id = 11